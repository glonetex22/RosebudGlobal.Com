<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Forgot Password - RoseBud Global</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/auth.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-white">
        <div class="navbar-container">
            <a href="index.html" class="logo">
                <img src="images/Rosebud_Global_Logo.png" alt="RoseBud Global" class="logo-img">
            </a>
                        <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn" id="mobileMenuBtn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
              <span></span>
              <span></span>
              <span></span>
            </button>
            <ul class="nav-links" id="navMenu">
                <button class="mobile-menu-close" onclick="toggleMobileMenu()">×</button>
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="shop.html" class="nav-link">Shop</a></li>
                <li><a href="supply-services.html" class="nav-link">Supply Services</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>
            <div class="nav-icons">
                <button class="icon-btn search-btn" aria-label="Search">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M20 20L16 16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>
                <a href="signin.html" class="icon-btn" aria-label="Account">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M5 20C5 16.6863 7.68629 14 11 14H13C16.3137 14 19 16.6863 19 20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </a>
                <button class="icon-btn cart-btn" aria-label="Cart" onclick="toggleCart()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M6 6H21L19 16H8L6 6Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                        <path d="M6 6L5 3H2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="10" cy="20" r="1" fill="currentColor"/>
                        <circle cx="17" cy="20" r="1" fill="currentColor"/>
                    </svg>
                    <span class="cart-count" id="cartCount">0</span>
                </button>
            </div>
        </div>
                <div class="mobile-menu-overlay" id="mobileMenuOverlay" onclick="toggleMobileMenu()"></div>
        </nav>

    <!-- Main Content -->
    <main class="auth-page">
        <div class="auth-container">
            <div class="auth-card">
                <a href="signin.html" class="back-link">
                    <svg viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Back to Sign In
                </a>

                <!-- Step 1: Choose Reset Method -->
                <div id="step1" class="auth-step">
                    <h1 class="auth-title">Forgot Password</h1>
                    <p class="auth-subtitle">Choose how you'd like to reset your password</p>

                    <!-- Reset Method Tabs -->
                    <div class="reset-method-tabs">
                        <button class="reset-tab active" onclick="switchResetMethod('email')">Reset by Email</button>
                        <button class="reset-tab" onclick="switchResetMethod('phone')">Reset by Phone</button>
                    </div>

                    <!-- Email Reset Form -->
                    <div id="emailReset" class="reset-method-content active">
                        <form class="auth-form" onsubmit="sendEmailOTP(event)">
                            <div class="form-group">
                                <label for="resetEmail">Email address</label>
                                <input type="email" id="resetEmail" placeholder="Enter your email address" required>
                            </div>
                            <button type="submit" class="auth-btn primary">Send Reset Code</button>
                        </form>
                    </div>

                    <!-- Phone Reset Form -->
                    <div id="phoneReset" class="reset-method-content">
                        <form class="auth-form" onsubmit="sendPhoneOTP(event)">
                            <div class="form-group">
                                <label for="resetPhone">Phone number</label>
                                <input type="tel" id="resetPhone" placeholder="(XXX) XXX-XXXX" required oninput="formatPhoneInput(this)" maxlength="14">
                                <span class="field-hint" style="font-size: 12px; color: #6C7275; margin-top: 4px; display: block;">Format: (XXX) XXX-XXXX. Cannot start with 0 or 1.</span>
                            </div>
                            <button type="submit" class="auth-btn primary">Send Reset Code</button>
                        </form>
                    </div>
                </div>

                <!-- Step 2: Enter OTP -->
                <div id="step2" class="auth-step" style="display: none;">
                    <h1 class="auth-title">Enter Code</h1>
                    <p class="auth-subtitle" id="otpMessage">We've sent a 6-digit code to your email</p>

                    <div class="otp-section">
                        <div class="otp-inputs">
                            <input type="text" class="otp-input" maxlength="1" id="otp1" oninput="handleOTPInput(1)" onkeydown="handleOTPKeydown(event, 1)">
                            <input type="text" class="otp-input" maxlength="1" id="otp2" oninput="handleOTPInput(2)" onkeydown="handleOTPKeydown(event, 2)">
                            <input type="text" class="otp-input" maxlength="1" id="otp3" oninput="handleOTPInput(3)" onkeydown="handleOTPKeydown(event, 3)">
                            <input type="text" class="otp-input" maxlength="1" id="otp4" oninput="handleOTPInput(4)" onkeydown="handleOTPKeydown(event, 4)">
                            <input type="text" class="otp-input" maxlength="1" id="otp5" oninput="handleOTPInput(5)" onkeydown="handleOTPKeydown(event, 5)">
                            <input type="text" class="otp-input" maxlength="1" id="otp6" oninput="handleOTPInput(6)" onkeydown="handleOTPKeydown(event, 6)">
                        </div>

                        <div class="resend-otp">
                            <span>Didn't receive the code? </span>
                            <button type="button" class="resend-btn" id="resendBtn" onclick="resendOTP()" disabled>Resend in <span id="countdown">60</span>s</button>
                        </div>

                        <button type="button" class="auth-btn primary" onclick="verifyOTP()" style="margin-top: 24px;">Verify Code</button>
                    </div>
                </div>

                <!-- Step 3: Reset Password -->
                <div id="step3" class="auth-step" style="display: none;">
                    <h1 class="auth-title">Reset Password</h1>
                    <p class="auth-subtitle">Create a new strong password</p>

                    <form class="auth-form" onsubmit="resetPassword(event)">
                        <div class="form-group">
                            <label for="newPassword">New password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="newPassword" placeholder="Enter new password" required oninput="checkResetPasswordStrength()">
                                <button type="button" class="password-toggle" onclick="togglePasswordVisibility('newPassword')">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/>
                                    </svg>
                                </button>
                            </div>

                            <!-- Password Requirements -->
                            <div class="password-requirements" id="resetPasswordRequirements">
                                <h4>Password must have:</h4>
                                <div class="requirement" id="resetReqLength">
                                    <span class="requirement-icon">○</span>
                                    <span class="requirement-text">Use strong password (8+ characters)</span>
                                </div>
                                <div class="requirement" id="resetReqMix">
                                    <span class="requirement-icon">○</span>
                                    <span class="requirement-text">Must include numbers and letters</span>
                                </div>
                                <div class="requirement" id="resetReqPrevious">
                                    <span class="requirement-icon">○</span>
                                    <span class="requirement-text">No previous passwords</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="confirmPassword">Confirm password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="confirmPassword" placeholder="Confirm new password" required>
                                <button type="button" class="password-toggle" onclick="togglePasswordVisibility('confirmPassword')">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <button type="submit" class="auth-btn primary">Reset Password</button>
                    </form>
                </div>

                <!-- Step 4: Success -->
                <div id="step4" class="auth-step" style="display: none;">
                    <div class="auth-success">
                        <div class="auth-success-icon">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M20 6L9 17L4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h2>Password Reset Successful!</h2>
                        <p>Your password has been successfully reset. You can now sign in with your new password.</p>
                        <a href="signin.html" class="auth-btn primary" style="display: inline-block; text-decoration: none;">Sign In</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-top">
                <div class="footer-brand">
                    <img src="images/Rosebud_Global_Logo_White.png" alt="RoseBud Global" class="footer-logo">
                    <span class="footer-divider"></span>
                    <p class="footer-tagline">Gift & Decoration Store</p>
                </div>
                <nav class="footer-nav">
                    <a href="index.html" class="footer-link">Home</a>
                    <a href="shop.html" class="footer-link">Shop</a>
                    <a href="supply-services.html" class="footer-link">Supply Services</a>
                    <a href="contact.html" class="footer-link">Contact</a>
                            <div class="mobile-menu-overlay" id="mobileMenuOverlay" onclick="toggleMobileMenu()"></div>
        </nav>
            </div>
            <div class="footer-bottom">
                <div class="footer-legal">
                    <p class="copyright">Copyright © 2026 Rosebud Global LLC. All rights reserved</p>
                    <a href="privacy.html" class="legal-link">Privacy Policy</a>
                    <a href="termsofservice.html" class="legal-link">Terms of Use</a>
                </div>
                <div class="footer-social">
                    <a href="#" class="social-link" aria-label="Instagram">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <rect x="2" y="2" width="20" height="20" rx="5" stroke="currentColor" stroke-width="1.5"/>
                            <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.5"/>
                            <circle cx="18" cy="6" r="1.5" fill="currentColor"/>
                        </svg>
                    </a>
                    <a href="#" class="social-link" aria-label="Facebook">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                    <a href="#" class="social-link" aria-label="YouTube">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <rect x="2" y="4" width="20" height="16" rx="4" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M10 9L15 12L10 15V9Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Shopping Cart</h3>
            <button class="close-cart" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <p class="empty-cart">Your cart is empty</p>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">$0.00</span>
            </div>
            <button class="checkout-btn" onclick="handleCheckout()">Checkout</button>
        </div>
    </div>
    <div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>

    <script src="js/main.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/auth.js"></script>
</body>
</html>
